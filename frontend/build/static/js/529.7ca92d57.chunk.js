/*! For license information please see 529.7ca92d57.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[529],{1529:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var a=n(5043),o=n(8868),r=n(579);const s=()=>{const[t,e]=(0,a.useState)(""),[n,s]=(0,a.useState)(1e3),[c,i]=(0,a.useState)(1),[u,l]=(0,a.useState)(""),[d,f]=(0,a.useState)(null),p=(0,o.A)((t=>t.sendInputDataToBackend)),h=(0,o.A)((t=>t.addInputData));return(0,r.jsx)("main",{className:"product-management",children:(0,r.jsx)("article",{children:(0,r.jsxs)("form",{onSubmit:a=>{a.preventDefault();const o={name:t,price:n,stock:c,photo:d};p(o),h(o),e(""),s(1e3),i(1),l(""),f(null)},children:[(0,r.jsx)("h2",{children:"New Product"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Name"}),(0,r.jsx)("input",{type:"text",placeholder:"Name",value:t,name:"name",onChange:t=>{e(t.target.value)}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Price"}),(0,r.jsx)("input",{type:"number",placeholder:"Price",value:n,name:"price",onChange:t=>{const e=t.target.value,n=parseFloat(e);s(n)}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Stock"}),(0,r.jsx)("input",{type:"number",placeholder:"Stock",value:c,name:"stock",onChange:t=>{const e=t.target.value,n=parseInt(e,10);i(n)}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Photo"}),(0,r.jsx)("input",{type:"file",onChange:t=>{var e;const n=null===(e=t.target.files)||void 0===e?void 0:e[0],a=new FileReader;n?(a.readAsDataURL(n),a.onloadend=()=>{"string"===typeof a.result&&(l(a.result),f(n))}):(l(""),f(null))},name:"file"})]}),u&&(0,r.jsx)("img",{src:u,alt:"NewImage"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Upload Image"}),(0,r.jsx)("input",{type:"file",onChange:async t=>{const e=t.target.files[0],n=new FormData;n.append("file",e);try{const t=await fetch("http://localhost:5000/api/v1/upload/new",{method:"POST",body:n});if(t.ok){const e=await t.json();f(e.filePath),console.log("File path:",e.filePath)}else console.error("Failed to upload image")}catch(a){console.error("Error uploading image:",a)}},name:"file"})]}),(0,r.jsx)("button",{type:"submit",children:"Create"})]})})})}},8868:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(4548),o=n(6213);const r="http://localhost:5000/api/v1/product",s=(0,a.vt)(((t,e)=>({cartItems:[],foodList:[],inputData:[],addToCart:async n=>{try{const a=(await o.A.get("".concat(r,"/").concat(n))).data,s=e().cartItems.findIndex((t=>t._id===n));if(-1!==s){const n=[...e().cartItems];n[s].quantity+=1,t({cartItems:n})}else{const n=[...e().cartItems,{...a,quantity:1}];t({cartItems:n})}console.log("Product ".concat(a.name," added to cart"))}catch(a){console.error("Error adding product to cart:",a)}},removeFromCart:e=>t((t=>{const n=[...t.cartItems],a=n.findIndex((t=>t._id===e));return-1!==a&&(n[a].quantity-=1,0===n[a].quantity&&n.splice(a,1)),{cartItems:n}})),getTotalCartAmount:()=>{const{cartItems:t}=e();let n=0;return t.forEach((t=>{n+=t.price*t.quantity})),n},setFoodList:e=>t({foodList:e}),fetchFoodList:async()=>{try{const e=await o.A.get(r);t({foodList:e.data})}catch(e){console.error("Failed to fetch food list:",e)}},addInputData:e=>{console.log("Input data:",e),t((t=>({inputData:[...t.inputData,e]})))},sendInputDataToBackend:async t=>{try{const e="Dabbemein4098",n={name:t.name,photo:t.photo,price:parseFloat(t.price),stock:parseInt(t.stock,10)},a=await o.A.post("http://localhost:5000/api/v1/product/new",n,{headers:{Authorization:"Bearer ".concat(e)}});console.log("Input data sent to the backend:",a.data)}catch(e){console.error("Error sending input data to the backend:",e)}}})))},5956:(t,e,n)=>{var a=n(5043);var o="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},r=a.useState,s=a.useEffect,c=a.useLayoutEffect,i=a.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!o(t,n)}catch(a){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),a=r({inst:{value:n,getSnapshot:e}}),o=a[0].inst,l=a[1];return c((function(){o.value=n,o.getSnapshot=e,u(o)&&l({inst:o})}),[t,n,e]),s((function(){return u(o)&&l({inst:o}),t((function(){u(o)&&l({inst:o})}))}),[t]),i(n),n};e.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:l},5039:(t,e,n)=>{var a=n(5043),o=n(9461);var r="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},s=o.useSyncExternalStore,c=a.useRef,i=a.useEffect,u=a.useMemo,l=a.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,a,o){var d=c(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=u((function(){function t(t){if(!i){if(i=!0,s=t,t=a(t),void 0!==o&&f.hasValue){var e=f.value;if(o(e,t))return c=e}return c=t}if(e=c,r(s,t))return e;var n=a(t);return void 0!==o&&o(e,n)?e:(s=t,c=n)}var s,c,i=!1,u=void 0===n?null:n;return[function(){return t(e())},null===u?void 0:function(){return t(u())}]}),[e,n,a,o]);var p=s(t,d[0],d[1]);return i((function(){f.hasValue=!0,f.value=p}),[p]),l(p),p}},9461:(t,e,n)=>{t.exports=n(5956)},8443:(t,e,n)=>{t.exports=n(5039)},4548:(t,e,n)=>{n.d(e,{vt:()=>f});const a=t=>{let e;const n=new Set,a=(t,a)=>{const o="function"===typeof t?t(e):t;if(!Object.is(o,e)){const t=e;e=(null!=a?a:"object"!==typeof o||null===o)?o:Object.assign({},e,o),n.forEach((n=>n(e,t)))}},o=()=>e,r={setState:a,getState:o,getInitialState:()=>s,subscribe:t=>(n.add(t),()=>n.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=e=t(a,o,r);return r},o=t=>t?a(t):a;var r=n(5043),s=n(8443);const{useDebugValue:c}=r,{useSyncExternalStoreWithSelector:i}=s;let u=!1;const l=t=>t;const d=t=>{"function"!==typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e="function"===typeof t?o(t):t,n=(t,n)=>function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2?arguments[2]:void 0;n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);const a=i(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return c(a),a}(e,t,n);return Object.assign(n,e),n},f=t=>t?d(t):d}}]);
//# sourceMappingURL=529.7ca92d57.chunk.js.map